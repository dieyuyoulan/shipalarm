{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/views/test.vue","webpack:///./src/views/test.vue?05e0"],"names":["redefine","anObject","$toString","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","this","p","rf","f","undefined","unsafe","class","logs","log","index","key","gutter","span","message","placeholder","mqttPublish","type","round","data","client","mounted","initMqtt","mqttReceive","methods","vm","commonApi","mqtt","options","clientId","Math","random","toString","substr","connect","on","console","err","end","topic","publish","JSON","stringify","subscribe","push","destroyed","render"],"mappings":"kHACA,IAAIA,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAY,EAAQ,QACpBC,EAAQ,EAAQ,QAChBC,EAAQ,EAAQ,QAEhBC,EAAY,WACZC,EAAkBC,OAAOC,UACzBC,EAAiBH,EAAgBD,GAEjCK,EAAcP,GAAM,WAAc,MAA2D,QAApDM,EAAeE,KAAK,CAAEC,OAAQ,IAAKR,MAAO,SAEnFS,EAAiBJ,EAAeK,MAAQT,GAIxCK,GAAeG,IACjBb,EAASO,OAAOC,UAAWH,GAAW,WACpC,IAAIU,EAAId,EAASe,MACbC,EAAIf,EAAUa,EAAEH,QAChBM,EAAKH,EAAEX,MACPe,EAAIjB,OAAiBkB,IAAPF,GAAoBH,aAAaR,UAAY,UAAWD,GAAmBF,EAAMO,KAAKI,GAAKG,GAC7G,MAAO,IAAMD,EAAI,IAAME,IACtB,CAAEE,QAAQ,K,4DCvBRC,MAAM,e,GACLA,MAAM,c,iBAWL,Q,qKAZP,eAgBM,MAhBN,EAgBM,CAfJ,eAIK,KAJL,EAIK,E,mBAHH,eAEK,2BAF0C,EAAAC,MAAI,SAAnBC,EAAKC,G,wBAArC,eAEK,MAFDH,MAAM,cAA4CI,IAAKD,G,CACzD,eAAgB,wBAAVD,GAAG,Q,QAGb,eASS,GATAG,OAAQ,IAAE,C,yBACjB,iBAEU,CAFV,eAEU,GAFDC,KAAM,IAAE,C,yBAChB,iBACA,CADA,eACA,G,WADmB,EAAAC,Q,qDAAA,EAAAA,QAAO,IAAEC,YAAY,S,iCAEzC,eAIC,GAJQF,KAAM,IAAE,C,yBACf,iBAEC,CAFD,eAEC,GAFW,QAAO,EAAAG,YAAaC,KAAK,UAAUC,MAAA,I,0BAC9C,iBAAI,C,kFAWE,GACbnB,KAAM,OACNoB,KAFa,WAGX,MAAO,CACLC,OAAQ,GACRN,QAAS,GACTN,KAAM,KAGVa,QATa,WAUXpB,KAAKqB,WACLrB,KAAKsB,eAEPC,QAAS,CAOPF,SAPO,WAQL,IAAIG,EAAKxB,KACLyB,EAAY,oCACZC,EAAO,EAAQ,QACfC,EAAU,CAEZC,SAAU,UAAYC,KAAKC,SAASC,SAAS,IAAIC,OAAO,EAAG,IAE7DR,EAAGL,OAASO,EAAKO,QAAQR,EAAWE,GACpC3B,KAAKmB,OAAOe,GAAG,WAAW,WACxBC,QAAQ3B,IAAI,eAGdgB,EAAGL,OAAOe,GAAG,SAAS,SAAUE,GAC9BD,QAAQ3B,IAAI,QAAS4B,GACrBZ,EAAGL,OAAOkB,UASdtB,YA/BO,WAgCL,IAAIuB,EAAQ,iBACZtC,KAAKmB,OAAOoB,QAAQD,EAAOE,KAAKC,UAAUzC,KAAKa,WAQjDS,YAzCO,WA0CL,IAAIgB,EAAQ,iBACNd,EAAKxB,KACXwB,EAAGL,OAAOuB,UAAUJ,GAAO,SAAUF,GAC9BA,EAIHD,QAAQ3B,IAAI,MAAO4B,GAHnBD,QAAQ3B,IAAI,yBAMhBgB,EAAGL,OAAOe,GAAG,WAAW,SAAUI,EAAOzB,GACvCW,EAAGjB,KAAKoC,KAAK9B,QAInB+B,UAtEa,WAuEP5C,KAAKmB,OAAOkB,KAAKrC,KAAKmB,OAAOkB,QC5FrC,EAAOQ,OAASA,EAED","file":"js/chunk-ffe9f906.d67759a6.js","sourcesContent":["'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar $toString = require('../internals/to-string');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = $toString(R.source);\n    var rf = R.flags;\n    var f = $toString(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","<template>\r\n  <div class=\"chatroomBox\">\r\n    <ul class=\"contentBox\">\r\n      <li class=\"messageItem\" v-for=\"(log, index) in logs\" :key=\"index\">\r\n        <p>{{ log }}</p>\r\n      </li>\r\n    </ul>\r\n    <el-row :gutter=\"20\">\r\n      <el-col :span=\"12\"\r\n      ><el-input v-model=\"message\" placeholder=\"请输入内容\"></el-input\r\n      ></el-col>\r\n      <el-col :span=\"12\">\r\n        <el-button @click=\"mqttPublish\" type=\"success\" round\r\n        >发送消息</el-button\r\n        ></el-col\r\n      >\r\n    </el-row>\r\n  </div>\r\n\r\n</template>\r\n\r\n<script>\r\nimport mqtt from \"mqtt\";\r\n\r\nexport default {\r\n  name: \"test\",\r\n  data() {\r\n    return {\r\n      client: \"\",\r\n      message: \"\",\r\n      logs: [],\r\n    };\r\n  },\r\n  mounted() {\r\n    this.initMqtt();\r\n    this.mqttReceive();\r\n  },\r\n  methods: {\r\n    /**\r\n     * @name:初始化mqtt\r\n     * @msg:\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    initMqtt() {\r\n      let vm = this;\r\n      let commonApi = \"ws://mq.tongxinmao.com:18832/mqtt\";\r\n      var mqtt = require(\"mqtt\");\r\n      var options = {\r\n        //mqtt客户端的id\r\n        clientId: \"mqttjs_\" + Math.random().toString(16).substr(2, 8),\r\n      };\r\n      vm.client = mqtt.connect(commonApi, options);\r\n      this.client.on(\"connect\", function () {\r\n        console.log(\"连接成功....\");\r\n      });\r\n      //如果连接错误，打印错误\r\n      vm.client.on(\"error\", function (err) {\r\n        console.log(\"err=>\", err);\r\n        vm.client.end();\r\n      });\r\n    },\r\n    /**\r\n     * @name:发布mqtt消息\r\n     * @msg:\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    mqttPublish() {\r\n      let topic = \"topic/response\"; //和后台约定好的主题\r\n      this.client.publish(topic, JSON.stringify(this.message));\r\n    },\r\n    /**\r\n     * @name:接收mqtt消息\r\n     * @msg:\r\n     * @param {*}\r\n     * @return {*}\r\n     */\r\n    mqttReceive() {\r\n      let topic = \"topic/response\"; //要接收的主题\r\n      const vm = this;\r\n      vm.client.subscribe(topic, function (err) {\r\n        if (!err) {\r\n          console.log(\"subscribe success!\");\r\n        } else {\r\n          //打印错误\r\n          console.log(\"err\", err);\r\n        }\r\n      });\r\n      vm.client.on(\"message\", function (topic, message) {\r\n        vm.logs.push(message);\r\n      });\r\n    },\r\n  },\r\n  destroyed() {\r\n    if (this.client.end) this.client.end();\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>","import { render } from \"./test.vue?vue&type=template&id=7b4bb631\"\nimport script from \"./test.vue?vue&type=script&lang=js\"\nexport * from \"./test.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}